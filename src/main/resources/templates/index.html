<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/index.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,500&amp;subset=latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <title>Home</title>
</head>

<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <a class="navbar-brand" href="#">StackSurge</a>

        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="/logout">Logout</a>
            </li>
        </ul>
    </nav>
    <div style="visibility: hidden;" id="loading">
        <div class="blurScreen"></div>
        <div class="loading-div spinner-grow text-primary"></div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-sm-0 sideData">
                <div class="section_our_solution">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <br><br>
                            <p class="banner">Running Instances</p>
                            <div class="line"></div>
                            <br>
                            <div class="our_solution_category">
                                <div class="solution_cards_box">
                                        <h4 class="no_instance">No running instances</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8 col-sm-12">
                <p class="banner">Choose your stack</p>
                <div class="line"></div>
                <div class="row pt-5 m-auto">
                    <div class="col-md-6 col-lg-4 pb-3">
                        <div class="card card-custom bg-white border-white border-0">
                            <div class="card-custom-img" style="background-image: url(img/techstack.jpg);"></div>
                            <div class="card-custom-avatar">
                                <img class="img-fluid"
                                    src="https://www.itzgeek.com/wp-content/uploads/2014/03/Tomcat-Logo.jpg"
                                    alt="Avatar" />
                            </div>
                            <div class="card-body" style="overflow-y: auto">
                                <h4 class="card-title">Tomstack</h4>
                                <p class="card-text">
                                    Apache Tomcat is a free and open-source implementation of the Jakarta Servlet,
                                    Jakarta Expression Language,
                                    and WebSocket technologies. Tomcat provides a "pure Java" HTTP web server
                                    environment in which Java code can run.
                                </p>
                            </div>
                            <div class="card-footer" style="background: inherit; border-color: inherit;">
                                <a href="#" class="tag">Tomcat</a>
                                <a href="#" class="tag">Java</a>
                                <a href="#" class="tag">MySql</a>
                                <a href="#" class="tag">Firefox</a>
                                <a href="#" class="tag">Git</a>
                                <br>
                                <a onclick="showLoading()" href="/launchStack?stack=TOM" class="btn btn-primary"
                                    style="display: block;">Launch</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 pb-3">
                        <div class="card card-custom bg-white border-white border-0">
                            <div class="card-custom-img" style="background-image: url(img/techstack.jpg);"></div>
                            <div class="card-custom-avatar">
                                <img class="img-fluid"
                                    src="https://yt3.ggpht.com/_q52i8bUAEvcb7JR4e-eNTv23y2A_wg5sCz0NC0GrGtcw1CRMWJSOPVHUDh_bngD0q4gMvVeoA=s900-c-k-c0x00ffffff-no-rj"
                                    alt="Avatar" />
                            </div>
                            <div class="card-body" style="overflow-y: auto">
                                <h4 class="card-title">Codestack</h4>
                                <p class="card-text">
                                    Features a fully integrated vscode container with support for C, C++, Python and
                                    Java.
                                </p>
                            </div>
                            <div class="card-footer" style="background: inherit; border-color: inherit;">
                                <a href="#" class="tag">Vscode</a>
                                <a href="#" class="tag">Java</a>
                                <a href="#" class="tag">Python</a>
                                <a href="#" class="tag">C++</a>
                                <a href="#" class="tag">C</a>
                                <a href="#" class="tag">Git</a>
                                <br>
                                <a onclick="showLoading()" href="/launchStack?stack=CODE" class="btn btn-primary"
                                    style="display: block;">Launch</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 pb-3">
                        <div class="card card-custom bg-white border-white border-0">
                            <div class="card-custom-img" style="background-image: url(img/techstack.jpg);"></div>
                            <div class="card-custom-avatar">
                                <img class="img-fluid"
                                    src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQWYLIUdAsvyXdSdL43IEf5omJ8LB1_3BhwYtSR2Df-BdMV1--EOJWQ1UQjNDOVSUjwKAM&usqp=CAU"
                                    alt="Avatar" />
                            </div>
                            <div class="card-body" style="overflow-y: auto">
                                <h4 class="card-title">Base System</h4>
                                <p class="card-text">
                                    A base linux system.
                                </p>
                            </div>
                            <div class="card-footer" style="background: inherit; border-color: inherit;">
                                <a href="#" class="tag">Base Linux</a>
                                <a href="#" class="tag">Firefox</a>
                                <a href="#" class="tag">Git</a>
                                <br>
                                <a onclick="showLoading()" href="/launchStack?stack=BASE" class="btn btn-primary"
                                    style="display: block;">Launch</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
    const showLoading = () => {
        document.getElementById("loading").style.visibility = "visible";
    };

    const connectInstance = (port) => {
        window.open('http://' + window.location.hostname + ':' + port, '_blank');
    };

    const stopInstance = async (instanceId) => {
        document.getElementById("loading").style.visibility = "visible";
        fetch(`${window.location.protocol}//${window.location.hostname}:${window.location.port}/stopContainer`, {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ 'instanceId': instanceId })
        }).then(value => {
            location.reload();
        });
    };
</script>

</html>